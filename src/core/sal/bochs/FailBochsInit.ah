#ifndef __FAIL_BOCHS_INIT_AH__
  #define __FAIL_BOCHS_INIT_AH__

#include "config/VariantConfig.hpp"

#ifdef BUILD_BOCHS

#include "../SALInst.hpp"
#include "util/CommandLine.hpp"

aspect FailBochsInit {
	advice call("int bxmain()") : before ()
	{
        fail::CommandLine::Inst().collect_args(bx_startup_flags.argc, bx_startup_flags.argv);
		fail::simulator.startup();
	}
};

#endif
#endif // __FAIL_BOCHS_INIT_AH__
