if(BUILD_BOCHS)
	set(SRCS
		Listener.cc
		ListenerManager.cc
		SALConfig.cc
		Register.cc
		SimulatorController.cc
		perf/BreakpointBuffer.cc
		bochs/BochsController.cc
		bochs/BochsListener.cc
	)
elseif(BUILD_GEM5)
	set(SRCS
		Listener.cc
		ListenerManager.cc
		SALConfig.cc
		Register.cc
		SimulatorController.cc
		perf/BreakpointBuffer.cc
		gem5/Gem5Controller.cc
	)
elseif(BUILD_OVP)
	set(SRCS
		Listener.cc
		ListenerManager.cc
		SALConfig.cc
		Register.cc
		SimulatorController.cc
		perf/BreakpointBuffer.cc
		${VARIANT}/OVPController.cc
	)
elseif(BUILD_QEMU)
	set(SRCS
		Listener.cc
		ListenerManager.cc
		SALConfig.cc
		Register.cc
		perf/BreakpointBuffer.cc
		SimulatorController.cc
		qemu/QEMUController.cc
		qemu/wrappers.cc
	)
elseif(BUILD_T32)
	set(SRCS
		Listener.cc
		ListenerManager.cc
		SALConfig.cc
		Register.cc
		perf/BreakpointBuffer.cc
		SimulatorController.cc
		t32/T32Controller.cc
		t32/wrappers.cc
	)
endif(BUILD_BOCHS)

add_library(fail-sal ${SRCS})

add_dependencies(fail-sal fail-efw)
